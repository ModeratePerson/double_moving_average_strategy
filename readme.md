双均线策略回测实现说明

开发过程

1. **策略实现**：
   - 使用 Grok 模型，结合天勤量化（TqSdk）官网文档中的策略回测和双均线策略示例，快速构建了回测功能。
   - 回测基于日 K 线数据，默认参数如下：
     - 回测时间：2023-01-01 至 2023-12-31
     - 初始本金：1,000,000
     - 每次买入比例：20%
     - 短周期均线：12
     - 长周期均线：26
2. **遇到的问题及解决**：
   - **滑点设置**：
     - 在尝试设置滑点参数时，使用 Grok 的深度搜索功能未找到 TqSdk 中设置滑点的相关文档。
     - 考虑到使用的是日 K 线回测，滑点影响较小，暂时未设置滑点。
   - **BARSLAST 值更新问题**：
     - 使用 Grok 时，BARSLAST 值无法正确更新，导致回测逻辑错误。
     - 切换至 Claude 3.7 模型后，成功解决了该问题。

使用说明

安装requirements.txt依赖

- **运行方式**：
  - 代码采用 if __name__ == "__main__": 模块化设计，便于测试。
  - 用户只需设置以下参数运行backtest.py即可开始回测：
    - 期货代码
    - 布尔条件（启用回测，当前已经有检测金叉死叉等示例布尔函数）
  - 回测结果和关键日志会打印在控制台，中间过程数据保存为 CSV 文件。
- **默认参数**：
  - 回测时间段：2023-01-01 至 2023-12-31
  - 初始本金：1,000,000
  - 每次买入：账户资金的 20%
  - 均线周期：短周期 12，长周期 26

------

